## 接口说明
 &#8195; &#8195;机器翻译（NMT）可以将源语种文字转换为目标语种文字。该能力通过HTTP API的方式提供给开发者，相较于SDK，该方式具有轻量、跨平台、跨开发语言的特点。</br>
 &#8195; &#8195;使用时请求方通过HTTP协议的POST方法将文字信息一次性的发送到服务器，然后通过HTTP协议的GET方法去服务器获取翻译结果。与一次性交互的方式（既将文字信息一次性发送到服务器，然后等服务器处理完成之后该请求才携带翻译结果返回）相比，发送文字的请求会在服务器收到文字之后就返回，不会阻塞到服务器翻译完成，减少调用等待的时间，应用处理起来更灵活。


 ## 接口要求

项目 | 说明
---|---
请求地址 | http://api.baller-tech.com/v1/service/v1/nmt 
请求方式 | 发送文字数据时使用POST；获取翻译结果时使用GET 
字符编码 | UTF-8

## <span id="signauter">接口签名</span>
&#8195; &#8195;为了防止通信过程中发送的消息被他人窃取和修改，每一个HTTP协议接口都需要进行签名验证，服务器发现请求的签名不一致时会拒绝处理。</br>
&#8195; &#8195;将**app_key**（由北京大牛儿科技发展有限公司统一分配）、**请求时间**（GMT格式）、**base64编码后的业务参数**按照固定的顺序组成的字符串MD5后的结果作为签名，放到请求报文的Header的B-CheckSum参数中。

##  接口调用流程
1. 通过HTTP协议POST方法，将文本数据一次性的发送到服务器。
2. 通过HTTP协议GET方法，去服务器获取翻译结果以及是否获取结束的状态；
3. 如果HTTP协议GET方法的响应中是否获取结束的状态为未结束，需要继续调用HTTP协议GET方法请求翻译结果；为了避免频繁的交互浪费CPU和网络资源，两次HTTP协议GET方法的请求之间可以间隔一段时间（具体值可以根据使用场景进行测试确定，建议150~200毫秒）。


## 接口参数
### 1. POST方法请求参数
#### 1.1 HTTP请求Header中需设置参数

参数 | 类型 | 说明 | 举例
---|---|---|---
B-AppId | string |由北京大牛儿科技发展有限公司统一分配；<br/>分配的值为64位的整型，此处需要转换为string | 1176611429127553031
B-CurTime | string |GMT+0时区的符合RFC1123格式的日期和时间，星期和月份只能使用英文表示；<br/>需和接口签名时的请求时间一致；<br/>服务器会拒绝处理请求时间与当前时间相差300秒的请求| Fri, 10 Jan 2020 07:31:50 GMT
B-Param | string | 经过BASE64编码后的业务参数，参见[业务参数](#post_business_param) | 
B-CheckSum | string | 参见[接口签名](#signauter)。 | 
Content-Type | string | 传输数据的类型，此处使用固定值 | application/octet-stream

##### 1.1.1 <span id="post_business_param">业务参数介绍</span>

参数 | 类型 | 说明 | 举例
---|---|---|---
request_id | string | 本次机器翻译事务的请求ID；<br/>获取该请求翻译结果时需携带相同的请求ID；<br/>调用者需保证请求ID的唯一性，建议使用UUID | 6497c282-9371-4c68-a9f1-522212b5ac1d
language| string | 翻译使用的语种，参见[支持的语种](#support_language) | tib-chs 

#### 1.2 HTTP请求Body
&#8195; &#8195;待翻译的文本数据。


#### 1.3 响应报文
http响应数据为json格式，具体字段的含义如下

参数 | 类型 | 说明
---|---|---
code|  int | 请求处理的结果码 (0：成功；其他：失败) |
message|  string | 对code字段的文本说明 |
request_id| string | 请求时传入的request_id |

```
{
    "code": 0,
    "message": "success",
    "request_id": "f7409982-dc05-4d19-80c9-6169dd70b247"
}
```


### 2. GET方法请求参数
#### 2.1 HTTP请求Header中需设置参数

参数 | 类型 | 说明 | 举例
---|---|---|---
B-AppId | string |由北京大牛儿科技发展有限公司统一分配；<br/>分配的值为64位的整型，此处需要转换为string | 1176611429127553031
B-CurTime | string |GMT+0时区的符合RFC1123格式的日期和时间，星期和月份只能使用英文表示；<br/>需和接口签名时的请求时间一致；<br/>服务器会拒绝处理请求时间与当前时间相差300秒的请求| Fri, 10 Jan 2020 07:31:50 GMT
B-Param | string | 经过BASE64编码后的业务参数，参见[业务参数](#get_business_param) | 
B-CheckSum | string | 参见[接口签名](#signauter)。 | 

##### 2.1.1 <span id="get_business_param">业务参数介绍</span>

参数 | 类型 | 说明 | 举例
---|---|---|---
request_id | string | 本次机器翻译事务的请求ID；<br/>需与POST时保持一致 | 6497c282-9371-4c68-a9f1-522212b5ac1d

#### 响应报文

| 参数       | 类型   | 说明                                       |
| ---------- | ------ | ------------------------------------------ |
| code       | int    | 请求处理的结果码 (0：成功；其他：失败)     |
| message    | string | 对code字段的文本说明                       |
| request_id | string | 请求时传入的request_id                     |
| is_end     | int    | 翻译结果是否获取结束（1：结束；0：未结束） |
| data       | string | 翻译的结果                                 |


## <span id="support_language">支持的语种</span>

| 翻译语种                       | 对应的language字段 |
| :----------------------------- | ------------------ |
| 藏文翻译为中文                  | tib-zho         |
| 维文翻译为中文                  | uig-zho         |
| 哈萨克文(传统)翻译为中文        | kaz_i-zho       |
| 蒙文(传统)翻译为中文            | mon_i-zho       |
| 蒙文(西里尔)翻译为中文          | mon_o-zho       |
| 彝文翻译为中文                  | iii-zho         |
| 壮文翻译为中文                  | zha-zho         |
| 韩文翻译为中文                  | kor-zho         |
| 中文翻译为藏文                  | zho-tib         |
| 中文翻译为哈萨克文(传统)        | zho-kaz_i       |
| 中文翻译为蒙文(传统)            | zho-mon_i       |
| 中文翻译为蒙文(西里尔)          | zho-mon_o       |
| 中文翻译为维文                  | zho-uig         |
| 中文翻译为彝文                  | zho-iii         |
| 中文翻译为壮文                  | zho-zha         |
| 中文翻译为韩文                  | zho-kor         |
| 中文翻译为英文 | zho-eng |
| 英文翻译为中文 | eng-zho |